package buildFeatures

feature('micrometerTracing', 'Micrometer tracing') {
    implementation 'io.micrometer:micrometer-tracing'
    if (project.hasProperty("otel")) {
        implementation("io.micrometer:micrometer-tracing-bridge-otel")
        implementation("io.opentelemetry:opentelemetry-exporter-zipkin")
    }
    else {
        implementation("io.micrometer:micrometer-tracing-bridge-brave")
        implementation("io.zipkin.reporter2:zipkin-reporter-brave")
    }
    implementation("io.zipkin.brave:brave-instrumentation-mongodb") {
        conditionalOnFeature('springBootDataMongoDb')
    }
    implementation("io.zipkin.brave:brave-instrumentation-mongodb") {
        conditionalOnFeature('springBootDataMongoDbReactive')
    }
    testImplementation("io.micrometer:micrometer-tracing-test")
}
